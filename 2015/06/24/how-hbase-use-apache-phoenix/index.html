<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="description" content="果敢、责任、思考" />
<meta name="keywords" content="shadowsocks,git,github,git工作流,大数据,android ,ios,分布式 " />
<meta name="360-site-verification" content="2ebfa6bfe0988ac65c00405e3012ab01" />
<meta name="sogou_site_verification" content="r5H99U6ELU"/>
<link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>
<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>
<link rel="alternate" href="/atom.xml" title="自由" type="application/atom+xml" />
<link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />
  <title> 使用Phoenix通过sql语句更新操作hbase数据 - 自由 </title>
</head>

<body>
<!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://static.ixirong.com/picouterie.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">

    <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>
    <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
  
  function displaySidebar () {
    setTimeout(function () {
      $('.sidebar-toggle').trigger('click');
    }, 800);
  }

</script>


      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">做个创造者</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
    <div class="c-search-form-div" style="display:none;">
      
            
      <form class="menu-item" ><input type="text" id="ts-search-input" class="menu-search-input"></form>
      <script type="text/javascript">
        var option = {
          engineKey: 'd4ab1eac98f4d5235098'
        };
        (function(w,d,t,u,n,s,e){
         s = d.createElement(t);
          s.src = u;
          s.async = 1;
          w[n] = function(r){
            w[n].opts = r;
          };
          e = d.getElementsByTagName(t)[0];
          e.parentNode.insertBefore(s, e);
        })(window,document,'script','//tinysou-cdn.b0.upaiyun.com/ts.js','_ts');
        _ts(option);
      </script>
      

    </div>
    <script type="text/javascript">
      if(isDesktop() || isTablet()){        
        $('.c-search-form-div').css("display","inline");
      }    
    </script>

    
      
      
        <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          关于
        </a>
      </li>
      
    
      
      
        <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          分类
        </a>
      </li>
      
    
      
      
        <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          归档
        </a>
      </li>
      
    
      
      
        <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          标签
        </a>
      </li>
      
    
      
    

    <script type="text/javascript">
      if(!isMobile()){
         $('.menu-item-commonweal').css("display","");
      }
    </script>

  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              使用Phoenix通过sql语句更新操作hbase数据
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-24
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/大数据/">大数据</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/06/24/how-hbase-use-apache-phoenix/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/24/how-hbase-use-apache-phoenix/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>hbase &#x63D0;&#x4F9B;&#x5F88;&#x65B9;&#x4FBF;&#x7684;shell&#x811A;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x6570;&#x636E;&#x8868;&#x8FDB;&#x884C; CURD &#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x6BD5;&#x7ADF;&#x662F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x6765;&#x8BB2;&#xFF0C;sql &#x8BED;&#x53E5;&#x90FD;&#x662F;&#x770B;&#x5BB6;&#x672C;&#x9886;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x628A; sql &#x8BED;&#x53E5;&#x8F6C;&#x6362;&#x6210; hbase&#x7684;&#x539F;&#x751F;API&#x5462;&#xFF1F; &#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x666E;&#x901A;&#x5E73;&#x5E38;&#x7684; sql &#x6765;&#x5BF9;hbase &#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x4F7F;&#x7528;&#x6210;&#x672C;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x3002;Apache Phoenix &#x7EC4;&#x4EF6;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x8FD9;&#x79CD;&#x9700;&#x6C42;&#xFF0C;&#x5B98;&#x65B9;&#x6CE8;&#x89E3;&#x4E3A; &#x201C;Phoenix - we put the SQL back in NoSql&#x201D;&#xFF0C;&#x901A;&#x8FC7;&#x5B98;&#x65B9;&#x8BF4;&#x660E;&#xFF0C;Phoenix &#x7684;&#x6027;&#x80FD;&#x5F88;&#x9AD8;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E; hbase &#x539F;&#x751F;&#x7684;scan &#x5E76;&#x4E0D;&#x4F1A;&#x5DEE;&#x591A;&#x5C11;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x7C7B;&#x4F3C;&#x7684;&#x7EC4;&#x4EF6; hive&#x3001;Impala&#x7B49;&#xFF0C;&#x6027;&#x80FD;&#x6709;&#x7740;&#x663E;&#x8457;&#x7684;&#x63D0;&#x5347;&#xFF0C;&#x8BE6;&#x7EC6;&#x8BF7;&#x9605;&#x8BFB; <a href="https://phoenix.apache.org/performance.html&#x3002;" target="_blank" rel="external">https://phoenix.apache.org/performance.html&#x3002;</a></p>
<p>Apache Phoenix &#x5B98;&#x65B9;&#x7AD9;&#x70B9;&#xFF1A;<a href="https://phoenix.apache.org/" target="_blank" rel="external">https://phoenix.apache.org/</a><br>Phoenix&#x652F;&#x6301;&#x7684;sql&#x8BED;&#x53E5;&#xFF1A; <a href="https://phoenix.apache.org/language/index.html" target="_blank" rel="external">https://phoenix.apache.org/language/index.html</a><br>Phoenix &#x652F;&#x6301;&#x7684;DataTypes&#xFF1A;<a href="https://phoenix.apache.org/language/datatypes.html" target="_blank" rel="external">https://phoenix.apache.org/language/datatypes.html</a><br>Phoenix &#x652F;&#x6301;&#x7684;&#x51FD;&#x6570;&#xFF1A;<a href="https://phoenix.apache.org/language/functions.html" target="_blank" rel="external">https://phoenix.apache.org/language/functions.html</a></p>
<a id="more"></a>
<h1 id="&#x4E00;&#x5B89;&#x88C5;&#x4F7F;&#x7528;">&#x4E00;&#x3001;&#x5B89;&#x88C5;&#x4F7F;&#x7528;</h1><p>Phoenix &#x5B89;&#x88C5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;hbase&#x7248;&#x672C;&#x7684;Phoenix&#xFF0C;<a href="https://phoenix.apache.org/download.html" target="_blank" rel="external">&#x4E0B;&#x8F7D;&#x5730;&#x5740;</a>&#xFF0C;&#x4EE5;<code>phoenix-4.4.0-HBase-0.98-bin.tar.gz</code>&#x4E3A;&#x4F8B;&#xFF0C;&#x89E3;&#x538B;&#x6587;&#x4EF6;&#xFF0C;&#x5C06;<code>phoenix-4.4.0-server.jar</code> &#x62F7;&#x8D1D;&#x5230;hbase&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x7684;lib&#x4E0B;&#xFF0C;&#x6CE8;&#x610F;&#xFF1A;&#x6BCF;&#x53F0;regionserver&#x5747;&#x9700;&#x8981;&#x62F7;&#x8D1D;&#xFF0C;&#x91CD;&#x542F;hbase server&#x5373;&#x53EF;&#xFF0C;&#x5B98;&#x65B9;&#x5982;&#x4E0B;&#xFF1A;</p>
<blockquote>
<ul>
<li><a href="https://phoenix.apache.org/download.html" target="_blank" rel="external">download</a> and expand the latest phoenix-[version]-bin.tar.</li>
<li>Add the phoenix-[version]-server.jar to the classpath of all HBase region server and master and remove any previous version. An easy way to do this is to copy it into the HBase lib directory (use phoenix-core-[version].jar for Phoenix 3.x)</li>
<li>restart the region servers</li>
<li>Add the phoenix-[version]-client.jar to the classpath of any Phoenix client.</li>
<li>download and setup <a href="https://phoenix.apache.org/installation.html#SQL_Client" target="_blank" rel="external">SQuirrel</a> as your SQL client so you can issue adhoc SQL against your HBase cluster</li>
</ul>
</blockquote>
<p>&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://phoenix.apache.org/Phoenix-in-15-minutes-or-less.html" target="_blank" rel="external">Phoenix-in-15-minutes</a> &#x3002;</p>
<h1 id="&#x4E8C;shell-&#x547D;&#x4EE4;">&#x4E8C;&#x3001;shell &#x547D;&#x4EE4;</h1><p>&#x901A;&#x8FC7;&#x6848;&#x4F8B;&#xFF0C;create &#x8868;&#xFF0C;&#x63D2;&#x5165;&#x8BED;&#x53E5;&#xFF0C;&#x66F4;&#x65B0;&#x8BED;&#x53E5;&#xFF0C;&#x5220;&#x9664;&#x8BED;&#x53E5;&#x6848;&#x4F8B;&#xFF0C;&#x8BE6;&#x7EC6;&#x53EF;&#x53C2;&#x8003;&#xFF1A;<a href="https://phoenix.apache.org/faq.html" target="_blank" rel="external">https://phoenix.apache.org/faq.html</a> </p>
<p>Phoenix &#x8FDE;&#x63A5;hbase&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF0C;<code>sqlline.py [zookeeper]</code> &#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@slave2 lib]$ ./sqlline.py <span class="number">10.35</span>.<span class="number">66.72</span></span><br><span class="line">Setting property: [isolation, TRANSACTION_READ_COMMITTED]</span><br><span class="line">issuing: !connect jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span> none none org.apache.phoenix.jdbc.PhoenixDriver</span><br><span class="line">Connecting to jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span></span><br><span class="line"><span class="number">15</span>/<span class="number">06</span>/<span class="number">24</span> <span class="number">13</span>:<span class="number">06</span>:<span class="number">29</span> WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Connected to: Phoenix (version <span class="number">4.2</span>)</span><br><span class="line">Driver: PhoenixEmbeddedDriver (version <span class="number">4.2</span>)</span><br><span class="line">Autocommit status: <span class="literal">true</span></span><br><span class="line">Transaction isolation: TRANSACTION_READ_COMMITTED</span><br><span class="line">Building list of tables and columns <span class="keyword">for</span> tab-completion (<span class="built_in">set</span> fastconnect to <span class="literal">true</span> to skip)...</span><br><span class="line"><span class="number">193</span>/<span class="number">193</span> (<span class="number">100</span>%) Done</span><br><span class="line">Done</span><br><span class="line">sqlline version <span class="number">1.1</span>.<span class="number">2</span></span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt;!tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+------------------</span><br></pre></td></tr></table></figure>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x80FD;&#x591F;&#x770B;&#x5230;&#xFF0C;&#x5DF2;&#x7ECF;&#x8FDE;&#x63A5;&#x5230;&#x4E86;hbase&#x96C6;&#x7FA4;&#x4E0A;&#x9762;&#xFF0C;<code>Phoenix version 4.2</code> &#xFF0C;<code>sqlline version 4.2</code>  &#xFF0C;&#x8F93;&#x5165;Phoenix&#x652F;&#x6301;&#x7684;&#x547D;&#x4EE4;<code>&#xFF01;tables</code>&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x96C6;&#x7FA4;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x6570;&#x636E;&#x8868;&#xFF0C;&#x80FD;&#x591F;&#x770B;&#x5230;&#x6709;&#x4E9B;&#x662F; <code>SYSTEM TABLE</code>&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x662F;&#x81EA;&#x5DF1;&#x5EFA;&#x7ACB;&#x7684;&#xFF1B;</p>
<p>&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x811A;&#x672C;&#x6765;&#x6A21;&#x62DF;&#x4E0B;&#x4F7F;&#x7528;Phoenix&#x5EFA;&#x7ACB;&#x6570;&#x636E;&#x8868;&#x3001;&#x4FEE;&#x6539;&#x8868;&#x3001;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x3001;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x3001;&#x5220;&#x9664;&#x6570;&#x636E;&#x3001;&#x5220;&#x9664;&#x8868;&#x7B49;&#x64CD;&#x4F5C;&#xFF1A;</p>
<p>1&#x3001;&#x65B0;&#x5EFA;&#x4E00;&#x5F20;<code>Person</code>&#x8868;&#xFF0C;&#x542B;&#x6709;<code>IDCardNum</code>&#xFF0C;<code>Name</code>&#xFF0C;<code>Age</code> &#x4E09;&#x4E2A;&#x5B57;&#x6BB5; &#xFF0C;<code>test</code> &#x4E3A;<code>table_schem</code> &#xFF0C;&#x6807;&#x51C6;sql&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test.Person (IDCardNum <span class="built_in">INTEGER</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">primary</span> <span class="keyword">key</span>, Name <span class="built_in">varchar</span>(<span class="number">20</span>),Age <span class="built_in">INTEGER</span>);</span></span><br></pre></td></tr></table></figure>
<p>&#x5728; Phoenix &#x4E2D;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; create table IF NOT EXISTS test.Person (IDCardNum INTEGER not null primary key, Name varchar(<span class="number">20</span>),Age INTEGER);</span><br><span class="line">No rows affected (<span class="number">0.344</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; !tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | TEST                                     | PERSON                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from TEST.PERSON;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;hbase&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x6570;&#x636E;&#x8868; <code>Person</code>&#x4E86;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x4E09;&#x5217;&#x3002;</p>
<p>2&#x3001;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;sql&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,Name,Age) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">&apos;&#x5C0F;&#x660E;&apos;</span>,<span class="number">12</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,Name,Age) <span class="keyword">values</span> (<span class="number">101</span>,<span class="string">&apos;&#x5C0F;&#x7EA2;&apos;</span>,<span class="number">15</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,Name,Age) <span class="keyword">values</span> (<span class="number">103</span>,<span class="string">&apos;&#x5C0F;&#x738B;&apos;</span>,<span class="number">22</span>);</span></span><br></pre></td></tr></table></figure>
<p>&#x5728; Phoenix &#x4E2D;&#x63D2;&#x5165;&#x7684;&#x8BED;&#x53E5;&#x4E3A; <code>upsert</code> &#xFF0C;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age) values (<span class="number">100</span>,<span class="string">&apos;&#x5C0F;&#x660E;&apos;</span>,<span class="number">12</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.043</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age) values (<span class="number">101</span>,<span class="string">&apos;&#x5C0F;&#x7EA2;&apos;</span>,<span class="number">15</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.018</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age) values (<span class="number">103</span>,<span class="string">&apos;&#x5C0F;&#x738B;&apos;</span>,<span class="number">22</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.009</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.Person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">| <span class="number">100</span>                                      | &#x5C0F;&#x660E;                   | <span class="number">12</span>                                       |</span><br><span class="line">| <span class="number">101</span>                                      | &#x5C0F;&#x7EA2;                   | <span class="number">15</span>                                       |</span><br><span class="line">| <span class="number">103</span>                                      | &#x5C0F;&#x738B;                   | <span class="number">22</span>                                       |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line"><span class="number">3</span> rows selected (<span class="number">0.115</span> seconds)</span><br></pre></td></tr></table></figure>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E09;&#x6761;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x8FDB;&#x5165;hbase&#x91CC;&#x9762;&#x4E86;&#xFF1B;&#x597D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x8981;&#x5BF9;&#x8868;&#x6DFB;&#x52A0;&#x4E00;&#x5217; <code>sex</code> &#x6027;&#x522B;&#x64CD;&#x4F5C;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</p>
<p>3&#x3001;alter &#x4FEE;&#x6539;&#x8868;&#x6570;&#x636E;&#xFF0C;sql&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test.Persion <span class="keyword">ADD</span> sex <span class="built_in">varchar</span>(<span class="number">10</span>);</span></span><br></pre></td></tr></table></figure>
<p>Phoenix &#x4E2D;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; ALTER TABLE test.Person ADD sex varchar(<span class="number">10</span>);</span><br><span class="line">No rows affected (<span class="number">0.191</span> seconds)</span><br><span class="line">: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| <span class="number">100</span>                                      | &#x5C0F;&#x660E;                   | <span class="number">12</span>                                       | null       |</span><br><span class="line">| <span class="number">101</span>                                      | &#x5C0F;&#x7EA2;                   | <span class="number">15</span>                                       | null       |</span><br><span class="line">| <span class="number">103</span>                                      | &#x5C0F;&#x738B;                   | <span class="number">22</span>                                       | null       |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line"><span class="number">3</span> rows selected (<span class="number">0.113</span> seconds)</span><br></pre></td></tr></table></figure>
<p>&#x4E0A;&#x56FE;&#x770B;&#x5230;&#x5DF2;&#x7ECF;&#x65B0;&#x589E;&#x4E86;&#x5217;<code>sex</code>&#xFF0C;&#x6BCF;&#x884C;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A; <code>null</code> &#xFF0C;&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x6837;&#x4FEE;&#x6539;&#x8FD9;&#x4E9B;&#x503C;&#x5462;&#xFF1F;</p>
<p>4&#x3001; &#x66F4;&#x65B0;&#x8868;&#x6570;&#x636E; &#xFF0C;&#x6807;&#x51C6;&#x7684;sql &#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">&apos;&#x7537;&apos;</span> <span class="keyword">where</span> IDCardNum=<span class="number">100</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">&apos;&#x5973;&apos;</span> <span class="keyword">where</span> IDCardNum=<span class="number">101</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">&apos;&#x7537;&apos;</span> <span class="keyword">where</span> IDCardNum=<span class="number">103</span>;</span></span><br></pre></td></tr></table></figure>
<p>Phoenix&#x4E2D;&#x4E0D;&#x5B58;&#x5728;<code>update</code>&#x7684;&#x8BED;&#x6CD5;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x800C;&#x662F;<code>upsert</code> &#xFF0C;&#x529F;&#x80FD;&#x4E0A;&#x66FF;&#x4EE3;&#x4E86;<code>Insert+update</code>&#xFF0C;&#x5B98;&#x65B9;&#x8BF4;&#x660E;&#x4E3A;&#xFF1A;</p>
<blockquote>
<p><strong>UPSERT VALUES</strong><br>Inserts if not present and updates otherwise the value in the table. The list of columns is optional and if not present, the values will map to the column in the order they are declared in the schema. The values must evaluate to constants.</p>
</blockquote>
<p>&#x6839;&#x636E;&#x4ECB;&#x7ECD;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;<code>upsert</code>&#x8BED;&#x53E5;&#x4E2D;&#x5236;&#x5B9A;&#x5B58;&#x5728;&#x7684;<code>idcardnum</code>&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x66F4;&#x65B0;&#xFF0C;&#x5728; Phoenix &#x5BA2;&#x6237;&#x7AEF;&#x4E2D;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.person (idcardnum,sex) values (<span class="number">100</span>,<span class="string">&apos;&#x7537;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.083</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.person (idcardnum,sex) values (<span class="number">101</span>,<span class="string">&apos;&#x5973;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.012</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.person (idcardnum,sex) values (<span class="number">103</span>,<span class="string">&apos;&#x7537;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.008</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| <span class="number">100</span>                                      | &#x5C0F;&#x660E;                   | <span class="number">12</span>                                       | &#x7537;          |</span><br><span class="line">| <span class="number">101</span>                                      | &#x5C0F;&#x7EA2;                   | <span class="number">15</span>                                       | &#x5973;          |</span><br><span class="line">| <span class="number">103</span>                                      | &#x5C0F;&#x738B;                   | <span class="number">22</span>                                       | &#x7537;          |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line"><span class="number">3</span> rows selected (<span class="number">0.087</span> seconds)</span><br></pre></td></tr></table></figure>
<p>5&#x3001;&#x590D;&#x6742;&#x67E5;&#x8BE2;&#xFF0C;&#x901A;&#x8FC7;Phoenix&#x53EF;&#x4EE5;&#x652F;&#x6301; where&#x3001;group by&#x3001;case when &#x7B49;&#x590D;&#x6742;&#x7684;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#xFF0C;&#x6848;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x73B0;&#x589E;&#x52A0;&#x51E0;&#x6761;&#x6570;&#x636E;</span></span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (<span class="number">104</span>,<span class="string">&apos;&#x5C0F;&#x5F20;&apos;</span>,<span class="number">23</span>,<span class="string">&apos;&#x7537;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.012</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (<span class="number">105</span>,<span class="string">&apos;&#x5C0F;&#x674E;&apos;</span>,<span class="number">28</span>,<span class="string">&apos;&#x7537;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.015</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (<span class="number">106</span>,<span class="string">&apos;&#x5C0F;&#x674E;&apos;</span>,<span class="number">33</span>,<span class="string">&apos;&#x7537;&apos;</span>);</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.011</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| <span class="number">100</span>                                      | &#x5C0F;&#x660E;                   | <span class="number">12</span>                                       | &#x7537;          |</span><br><span class="line">| <span class="number">101</span>                                      | &#x5C0F;&#x7EA2;                   | <span class="number">15</span>                                       | &#x5973;          |</span><br><span class="line">| <span class="number">103</span>                                      | &#x5C0F;&#x738B;                   | <span class="number">22</span>                                       | &#x7537;          |</span><br><span class="line">| <span class="number">104</span>                                      | &#x5C0F;&#x5F20;                   | <span class="number">23</span>                                       | &#x7537;          |</span><br><span class="line">| <span class="number">105</span>                                      | &#x5C0F;&#x674E;                   | <span class="number">28</span>                                       | &#x7537;          |</span><br><span class="line">| <span class="number">106</span>                                      | &#x5C0F;&#x674E;                   | <span class="number">33</span>                                       | &#x7537;          |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line"><span class="number">6</span> rows selected (<span class="number">0.09</span> seconds)</span><br></pre></td></tr></table></figure>
<p>where + group by &#x8BED;&#x53E5;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select sex ,count(sex) as num from test.person <span class="built_in">where</span> age &gt;<span class="number">20</span> group by sex;</span><br><span class="line">+------------+------------------------------------------+</span><br><span class="line">|    SEX     |                   NUM                    |</span><br><span class="line">+------------+------------------------------------------+</span><br><span class="line">| &#x7537;          | <span class="number">4</span>                                        |</span><br><span class="line">+------------+------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>case when &#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select (<span class="keyword">case</span> name when <span class="string">&apos;&#x5C0F;&#x660E;&apos;</span> <span class="keyword">then</span> <span class="string">&apos;&#x660E;&#x660E;&#x554A;&apos;</span> when <span class="string">&apos;&#x5C0F;&#x7EA2;&apos;</span> <span class="keyword">then</span> <span class="string">&apos;&#x7EA2;&#x7EA2;&#x554A;&apos;</span> <span class="keyword">else</span> name end) as showname from test.person;</span><br><span class="line">+------------------------------------------+</span><br><span class="line">|                 SHOWNAME                 |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">| &#x660E;&#x660E;&#x554A;                                      |</span><br><span class="line">| &#x7EA2;&#x7EA2;&#x554A;                                      |</span><br><span class="line">| &#x5C0F;&#x738B;                                       |</span><br><span class="line">| &#x5C0F;&#x5F20;                                       |</span><br><span class="line">| &#x5C0F;&#x674E;                                       |</span><br><span class="line">| &#x5C0F;&#x674E;                                       |</span><br><span class="line">+------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>&#x66F4;&#x591A;&#x652F;&#x6301;&#x8BED;&#x6CD5;&#x53C2;&#x8003;&#xFF1A;<a href="https://phoenix.apache.org/language/index.html" target="_blank" rel="external">https://phoenix.apache.org/language/index.html</a></p>
<p>6&#x3001;&#x5220;&#x9664;&#x6570;&#x636E;&#x53CA;&#x5220;&#x9664;&#x8868;&#xFF0C;&#x6807;&#x51C6;sql&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">delete</span> <span class="keyword">from</span> test.Person <span class="keyword">where</span> idcardnum=<span class="number">100</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">drop</span> <span class="keyword">table</span> test.person;</span></span><br></pre></td></tr></table></figure>
<p>Phoenix&#x4E2D;&#x540C;&#x6807;&#x51C6;sql&#x4E00;&#x6837;&#xFF0C;&#x6848;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; delete from test.Person <span class="built_in">where</span> idcardnum=<span class="number">100</span>;</span><br><span class="line"><span class="number">1</span> row affected (<span class="number">0.072</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.Person <span class="built_in">where</span> idcardnum=<span class="number">100</span>;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; drop table test.person;</span><br><span class="line">No rows affected (<span class="number">1.799</span> seconds)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; select * from test.person;</span><br><span class="line">Error: ERROR <span class="number">1012</span> (<span class="number">42</span>M03): Table undefined. tableName=TEST.PERSON (state=<span class="number">42</span>M03,code=<span class="number">1012</span>)</span><br><span class="line"><span class="number">0</span>: jdbc:phoenix:<span class="number">10.35</span>.<span class="number">66.72</span>&gt; !tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br></pre></td></tr></table></figure>
<h1 id="&#x4E09;&#x56FE;&#x5F62;&#x5316;&#x5BA2;&#x6237;&#x7AEF;squirrel&#x4F7F;&#x7528;">&#x4E09;&#x3001;&#x56FE;&#x5F62;&#x5316;&#x5BA2;&#x6237;&#x7AEF;SQuirrel&#x4F7F;&#x7528;</h1><p>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x559C;&#x6B22; &#x7EC8;&#x7AEF;&#x4E0B;&#x7684;&#x811A;&#x672C;&#x547D;&#x4EE4;&#xFF0C;&#x9752;&#x7750;&#x4E8E;GUI&#x5316;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x90A3;&#x4E48; SQuirrel&#x662F;&#x4E2A;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x5C31;&#x8DDF;&#x5E73;&#x65E5;&#x91CC;&#x4F7F;&#x7528; MsSqlServer client&#x3001;Navicat client &#x4E00;&#x6837;&#xFF0C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://phoenix.apache.org/images/squirrel.png" alt="squirrel client"></p>
<p>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;&#xFF08;&#x53EF;&#x4EE5;&#x53C2;&#x7167;<a href="https://phoenix.apache.org/installation.html#SQL_Client" target="_blank" rel="external">&#x5B98;&#x7F51;&#x82F1;&#x6587;&#x8BF4;&#x660E;</a>&#xFF09;</p>
<ol>
<li>&#x4E0B;&#x8F7D;SQuirrel &#x5BA2;&#x6237;&#x7AEF; &#xFF0C;&#x5730;&#x5740; <a href="http://squirrel-sql.sourceforge.net/" target="_blank" rel="external">http://squirrel-sql.sourceforge.net/</a></li>
<li>&#x89E3;&#x538B;&#x7F29;&#xFF0C;&#x5220;&#x9664; <code>lib/</code> &#x4E0B;&#x8001;&#x7248;&#x672C;&#x7684; <code>phoenix-[oldversion]-client.jar</code>&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x4F60;&#x521A;&#x521A;&#x4E0B;&#x8F7D;&#x7684;Phoenix&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x6700;&#x65B0;&#x7684;&#x6587;&#x4EF6; &#x62F7;&#x8D1D;&#x8FC7;&#x53BB;&#xFF1B;</li>
<li>&#x542F;&#x52A8;SQuirrel&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x9009;&#x62E9; Drivers-new driver &#xFF0C;&#x540D;&#x79F0;&#x968F;&#x4FBF;&#xFF0C;url&#x683C;&#x5F0F;&#xFF1A; <code>jdbc:phoenix:&#xFF08;zk&#x5730;&#x5740;&#xFF09;</code> &#xFF0C;class name textbox &#x586B;&#x5199;<code>org.apache.phoenix.jdbc.PhoenixDriver</code> </li>
<li>ok&#xFF0C; &#x70B9;&#x51FB; connect&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x8FDE;&#x63A5; </li>
</ol>
<p>squirrel &#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x7528;&#x6CD5; &#x548C; Phoenix &#x81EA;&#x5E26;&#x7EC8;&#x7AEF;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x5E38;&#x89C1;&#x7684;sql&#x8BED;&#x53E5;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x7EC3;&#x4E60;&#x3002;</p>
<h1 id="&#x56DB;-java-client-api-&#x4F7F;&#x7528;">&#x56DB;&#x3001; java client api &#x4F7F;&#x7528;</h1><p>java api &#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4F20;&#x7EDF;&#x7684; jdbc &#x8FDE;&#x63A5;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x6848;&#x4F8B;&#x5982;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#xFF1A;</p>
<p>&#x521B;&#x5EFA;<code>test.java</code> &#x7C7B;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">		Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">		ResultSet rset = <span class="keyword">null</span>;</span><br><span class="line">		</span><br><span class="line">		Connection con = DriverManager.getConnection(<span class="string">&quot;jdbc:phoenix:[zookeeper]&quot;</span>);</span><br><span class="line">		stmt = con.createStatement();</span><br><span class="line">		</span><br><span class="line">		stmt.executeUpdate(<span class="string">&quot;create table test (mykey integer not null primary key, mycolumn varchar)&quot;</span>);</span><br><span class="line">		stmt.executeUpdate(<span class="string">&quot;upsert into test values (1,&apos;Hello&apos;)&quot;</span>);</span><br><span class="line">		stmt.executeUpdate(<span class="string">&quot;upsert into test values (2,&apos;World!&apos;)&quot;</span>);</span><br><span class="line">		con.commit();</span><br><span class="line">		</span><br><span class="line">		PreparedStatement statement = con.prepareStatement(<span class="string">&quot;select * from test&quot;</span>);</span><br><span class="line">		rset = statement.executeQuery();</span><br><span class="line">		<span class="keyword">while</span> (rset.next()) {</span><br><span class="line">			System.out.println(rset.getString(<span class="string">&quot;mycolumn&quot;</span>));</span><br><span class="line">		}</span><br><span class="line">		statement.close();</span><br><span class="line">		con.close();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;<code>javac</code>&#x7F16;&#x8BD1;&#xFF0C;&#x901A;&#x8FC7;Phoenix&#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C;&#xFF0C;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x7ED3;&#x679C;&#xFF1A;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ javac test.java</span><br><span class="line">$ java -cp <span class="string">&quot;../phoenix-[version]-client.jar:.&quot;</span> <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You should get the following output</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure></p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5728;&#x751F;&#x4EA7;&#x4F7F;&#x7528;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x91C7;&#x7528;&#x7684;&#x662F; <code>spring mvc + mybaits</code> &#x7684;&#x6846;&#x67B6;&#x6765;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x7684;&#xFF0C;Phoenix &#x5B8C;&#x5168;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x50CF;&#x5E73;&#x5E38;&#x5199;mysql&#x3001;SqlServer&#x4E00;&#x6837;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;<code>jdbc.properties</code>&#x4E2D;&#x7684;&#x9A71;&#x52A8;&#x4FEE;&#x6539;&#x4E3A; <code>org.apache.phoenix.jdbc.PhoenixDriver</code> &#x5373;&#x53EF;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x5199;&#x6CD5;&#x901A;&#x666E;&#x901A;&#x7684;&#x4E00;&#x6837;&#x3002;</p>

      
    </div>

    <div class="post-footer">
    
    <! -- 添加捐赠图标 -->
    
<! -- 添加捐赠图标 -->


      
        <div class="post-tags">
          
            <a href="/tags/hbase/"> #hbase </a>
          
            <a href="/tags/phoenix/"> #phoenix </a>
          
            <a href="/tags/中间件/"> #中间件 </a>
          
            <a href="/tags/大数据/"> #大数据 </a>
          
        </div>
      

      
      
    </div>
  </div>



    
  </div>



    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2015 - 
  2016
  
  <span class="author"> Johnson</span>
</div>

<div class="powered-by">

   现实的理想主义者
</div>
<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io" rel="external nofollow">Hexo</a> 
</div>







      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <!-- <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script> -->

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <!-- <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
  
  function displaySidebar () {
    setTimeout(function () {
      $('.sidebar-toggle').trigger('click');
    }, 800);
  }

</script>
 -->
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');

    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebarToggleMotion();
    postsListMotion();
    backToTopMotion();    

    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

//search animate
$(function(){
   $('#ts-search-input').focus(function() {  //设置获得焦点时的方法，让文本框变长
    $(this).animate({width: "150"}, 300 );  
    $(this).val(''); //用于清空内容，可选操作
   });
 
   $('#ts-search-input').blur(function() {  //设置失去焦点时的方法，让文本框变短
    $(this).animate({width: "70"}, 300 );
   });
});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebarToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      if (isDesktop() && HEXO_SIDEBAR_CONFIGURATION === 'post') {
        displaySidebar();
      }
    });
  </script>




   <script type="text/javascript">
    var HEXO_SIDEBAR_CONFIGURATION = 'hide';
    $(document).ready(function () {
      if (HEXO_SIDEBAR_CONFIGURATION === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"xirong"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?35130bce62151673e28ec769bef55e70";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

  
  <script type="text/javascript">
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-61803765-1');ga('send','pageview');
  </script>

</body>
</html>
